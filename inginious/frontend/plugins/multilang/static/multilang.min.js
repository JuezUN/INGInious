function load_input_code_multiple_languages(e,n,o){load_input_code(e,n,o),setDropDownWithTheRightLanguage(n,o[n+"/language"]),changeSubmissionLanguage(n)}function onChangeLanguageDropdown(e,n){changeSubmissionLanguage(e,n)}function setDropDownWithTheRightLanguage(e,n){document.getElementById(e+"/language").value=n}function changeSubmissionLanguage(e,n){if("code_file_multiple_languages"===n)return;const o=getLanguageForProblemId(e),t=CodeMirror.findModeByName(o),i=codeEditors[e];i.setOption("inginiousLanguage",getInginiousLanguageForProblemId(e)),i.setOption("mode",t.mime),i.setOption("gutters",["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"]),i.setOption("lint",{async:!0}),CodeMirror.autoLoadMode(i,t.mode)}function getLanguageForProblemId(e){return convertInginiousLanguageToCodemirror(getInginiousLanguageForProblemId(e))}function getInginiousLanguageForProblemId(e){const n=document.getElementById(e+"/language");return null==n?"plain":n.options[n.selectedIndex].value}function convertInginiousLanguageToCodemirror(e){return{java7:"java",java8:"java",cpp:"cpp",cpp11:"cpp",c:"c",c11:"c",python3:"python",vhdl:"vhdl",verilog:"verilog"}[e]}function studio_init_template_code_multiple_languages(e,n,o){"type"in o&&$("#type-"+n,e).val(o.type),"optional"in o&&o.optional&&$("#optional-"+n,e).attr("checked",!0),"languages"in o&&jQuery.each(o.languages,function(o,t){t&&$("#"+o+"-"+n,e).attr("checked",!0)})}function studio_init_template_notebook_file(e,n,o){"type"in o&&$("#type-"+n,e).val(o.type)}function load_input_notebook_file(e,n,o){load_input_file(e,n,o);const t=$("form#task").attr("action")+"?submissionid="+e+"&questionid="+n;$.ajax({url:t,method:"GET",dataType:"json",success:function(e){render_notebook(e,$("#notebook-holder"))}}),highlight_code()}function studio_init_template_code_file_multiple_languages(e,n,o){"max_size"in o&&$("#maxsize-"+n,e).val(o.max_size),"allowed_exts"in o&&$("#extensions-"+n,e).val(o.allowed_exts.join()),"languages"in o&&jQuery.each(o.languages,function(o,t){t&&$("#"+o+"-"+n,e).attr("checked",!0)})}function load_input_code_file_multiple_languages(e,n,o){load_input_file(e,n,o),setDropDownWithTheRightLanguage(n,o[n+"/language"])}let selected_all_languages=!1;function toggle_languages_checkboxes(){const e=$("#environment"),n=getProblemIdEdit();selected_all_languages=!selected_all_languages,$(".checkbox_language").prop("checked",selected_all_languages);let o="Select all";selected_all_languages&&(o="Unselect All"),$("#toggle_select_languages_button").text(o),e.length&&("HDL"===e.val()?($(".checkbox_language").prop("checked",!1),$(`#vhdl-${n}`).prop("checked",selected_all_languages),$(`#verilog-${n}`).prop("checked",selected_all_languages)):"Data Science"===e.val()?($(".checkbox_language").prop("checked",!1),$(`#python3-${n}`).prop("checked",selected_all_languages)):($(`#vhdl-${n}`).prop("checked",!1),$(`#verilog-${n}`).prop("checked",!1)))}const original_studio_subproblem_delete=this.studio_subproblem_delete;this.studio_subproblem_delete=(e=>{original_studio_subproblem_delete(e),toggle_display_new_subproblem_option(),showCorrectLanguagesEnvironment()});const original_studio_create_new_subproblem=this.studio_create_new_subproblem;function toggle_display_new_subproblem_option(){const e=$("#accordion"),n=$("#new_subproblem");e.children().length?n.hide():n.show()}this.studio_create_new_subproblem=(()=>{original_studio_create_new_subproblem(),toggle_display_new_subproblem_option()});const render_notebook=function(e,n){const o=n[0];n.hide();const t=this.notebook=nb.parse(e);for(;o.hasChildNodes();)o.removeChild(o.lastChild);o.appendChild(t.render()),highlight_code(),n.show()};function notebook_start_renderer(){$("#task_alert").after('<div class="DivToScroll DivWithScroll" id="notebook-holder" hidden></div>');try{const e=$("input[name="+getProblemId()+"]")[0];e.onchange=function(e){const n=this.files[0];if(void 0===n||"ipynb"!==n.name.split(".")[1])return $("#notebook-holder").html(""),void $("#notebook-holder").hide();!function(e){const n=new FileReader;n.onload=function(e){const n=JSON.parse(this.result);render_notebook(n,$("#notebook-holder"))},n.readAsText(e)}(n)},e.onclick=function(){this.value=null,$("#notebook-holder").html(""),$("#notebook-holder").hide()}}catch(e){}}function sendSubmissionAnalytics(){$("#task-submit").on("click",function(){if(loadingSomething)return;if(!taskFormValid())return;if(!new Set(["multiple_languages","Data Science","Notebook","HDL"]).has(getTaskEnvironment()))return;const e={Notebook_notebook_file:[`${getTaskEnvironment()}_submission`,`${getTaskEnvironment()} submission`],multiple_languages_code_multiple_languages:["multiple_languages_code_multiple_languages","Multiple languages - Code submission"],multiple_languages_code_file_multiple_languages:["multiple_languages_code_file_multiple_languages","Multiple languages - File submission"],"Data Science_code_multiple_languages":["data_science_code_multiple_languages","Data Science - Code submission"],"Data Science_code_file_multiple_languages":["data_science_code_file_multiple_languages","Data Science - File submission"],HDL_code_multiple_languages:["HDL_code_multiple_languages","HDL - Code submission"],HDL_code_file_multiple_languages:["HDL_code_file_multiple_languages","HDL - File submission"]};$.post("/api/analytics/",{service:{key:e[`${getTaskEnvironment()}_${getProblemType()}`][0],name:e[`${getTaskEnvironment()}_${getProblemType()}`][1]},course_id:getCourseId()})})}function highlight_code(){Prism.highlightAll()}function getProblemIdEdit(){const e=$("#problem_id")[0];if(e)return e.value}function hideLanguages(){const e=getProblemIdEdit();$(`.checkbox_language_${e}`).prop("hidden",!0)}function showLanguages(){const e=getProblemIdEdit();$(`.checkbox_language_${e}`).prop("hidden",!1)}function showCorrectLanguagesEnvironment(e=!0){const n=getProblemIdEdit(),o=$("#environment");o.length&&(e&&$(".checkbox_language").prop("checked",!1),"HDL"===o.val()?(hideLanguages(),$(`.checkbox_${n}_vhdl`).prop("hidden",!1),$(`.checkbox_${n}_verilog`).prop("hidden",!1)):"Data Science"===o.val()?(hideLanguages(),$(`.checkbox_${n}_python3`).prop("hidden",!1)):(showLanguages(),$(`.checkbox_${n}_vhdl`).prop("hidden",!0),$(`.checkbox_${n}_verilog`).prop("hidden",!0)))}function updateDiffBlock(e,n){$("#"+e).html(parseOutputDiff(n))}function createDownloadLink(e,n){const o=`<a ${'class="btn-link" download="'+e+'"'} href="${`/course/${getCourseId()}/${getTaskId()}/${e}`}" target="_blank">Download</a>`;document.getElementById(e+"_download_link").innerHTML=o+"<br/><br/>"}function parseOutputDiff(e){let n=[],o=e.split("\n");n.push('<strong>Legend:</strong> <span class="diff-missing-output">Only in the expected output</span> <span class="diff-additional-output">Only in your output</span> <span class="diff-common">Common</span> <span class="diff-position-control">Context information</span>');for(let e=0;e<o.length;++e){let t=o[e],i=null;if(t.startsWith("---"))i='<span class="diff-missing-output">'+t.substring(4)+"</span>";else if(t.startsWith("+++"))i='<span class="diff-additional-output">'+t.substring(4)+"</span>";else if(t.startsWith("@@"))i='<span class="diff-position-control">'+t+"</span>";else if(t.startsWith("-"))i='<span class="diff-missing-output">'+t.substring(1)+"</span>";else if(t.startsWith("+"))i='<span class="diff-additional-output">'+t.substring(1)+"</span>";else if(t.startsWith(" "))i='<span class="diff-common">'+t.substring(1)+"</span>";else if(t.startsWith("..."))i='<span class="diff-position-control">'+t+"</span>";else{if(""!==t)throw new Error("Unable to parse diff line: "+t);i=t}n.push(i)}return n.join("\n")}jQuery(document).ready(function(){const e=$("#environment");e.length&&e.on("change",showCorrectLanguagesEnvironment),showCorrectLanguagesEnvironment(!1),toggle_display_new_subproblem_option(),notebook_start_renderer(),sendSubmissionAnalytics()});