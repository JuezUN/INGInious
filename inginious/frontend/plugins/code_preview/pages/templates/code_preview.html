$def with (courseid, taskid, code_preview_pairs, languages_names)

$ remove_str = _("Remove")
$ select_one_str = _("Select one language")
<div class="alert alert-warning">
    <i class="fa fa-info-circle"></i>
    $:_("Tool to setup templates that students can use as base code to start solving the problem. It only works for multilang and HDL tasks.")
</div>
<div class="jumbotron" id="code_preview">
    <div class="row" style="display: flex;">
        <div class="form-group col-xs-12">
            <div class="col-xs-4">
                <div><label class="control-label">$:_("Languages")</label></div>
                <select class="form-control" id="code_preview_languages">
                </select>
            </div>
            <div class="col-xs-4">
                <div><label class="control-label">$:_("Files")</label></div>
                <select class="form-control" id="code_preview_files">
                </select>
            </div>
            <div class="col-xs-4" style="display: flex; height: 100%;">
                <button type="button" class="btn btn-success btn-block" style="align-self: flex-end;"
                        onclick="addCodePreviewPair()">$:_("Add/Update")
                </button>
            </div>
        </div>
    </div>
    <div id="code_preview_files_pairs">
        $for key, value in code_preview_pairs.items():
            <div class="row" id="code-preview-$key-row">
                <div class="form-group col-xs-12">
                    <div class="col-xs-4">
                        <input class="form-control" readonly value="$languages_names[key]">
                    </div>
                    <div class="col-xs-4">
                        <input type=text class="form-control" id="code_preview_pairs_$key"
                               name="code_preview_pairs[$key]" value="$value" readonly/>
                    </div>
                    <div class="col-xs-4" style="display: flex; height: 100%">
                        <button type="button" class="btn btn-danger btn-block" style="align-self: flex-end;"
                        onclick="removeCodePreviewPair('$key');">$remove_str</button>
                    </div>
                </div>
            </div>
    </div>
</div>

<script type="text/javascript">
    function getLanguageName(languageName) {
        const names = $:{dict(languages_names)};
        return names[languageName];
    }

    const currentCodePreviewPairs = $:{dict(code_preview_pairs)};

    function getRemoveMessage(){
        return "$remove_str"
    }

    function getTaskId() {
        return "$taskid";
    }
    function getCourseId() {
        return "$courseid";
    }

    function getSelectOneMessage(){
        return "$select_one_str";
    }
</script>