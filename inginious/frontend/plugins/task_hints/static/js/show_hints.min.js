function showHintAlert(t,n){let i=$("#hint_modal_alert");"success"===n&&i.attr("class","alert alert-success"),"error"===n&&i.attr("class","alert alert-danger"),i.text(t),i.show(),setTimeout(function(){hideHintAlert(i)},1e4)}function hideHintAlert(t){t.attr("class",""),t.text("")}function loadHintsOnModal(){let t="/api/user_hints_api/";is_lti()&&(t="/"+$("form#task").attr("action").split("/")[1]+t),$.get(t,{course_id:getCourseId(),task_id:getTaskId()}).done(function(t){const n=t.data;setHintsOnContainer(n.hint_to_show),setTotalPenalty(n.total_penalty)})}function setHintUnlockedStatus(t,n){let i=n.unlocked;const e=$("#hint_menu_"+t).find("a");if(i){e.attr("class","list-group-item list-group-item-success");const t=n.penalty;e.find(".hint_penalty").text(t)}else e.attr("class","list-group-item list-group-item-success disabled")}function setHintsOnContainer(t){let n;$.each(t,function(t,i){n=i.unlocked;let e=$("#hint_"+t);if(n){const t=i.content;e.find(".hint_content").html(t);let n=e.find(".hint_applied_penalty");n.show(),n.find("em").text(i.penalty+"%")}else if(!existsUnlockFormContent(t)){let n=$("#hints_unlock_forms_list").clone().html();n=n.replace(/key/g,t),e.find(".hint_content").append(n),e.find(".hint_content .hint_unlock_form").show();const s=i.penalty;if(s&&0!==s)e.find(".hint_content .hint_unlock_penalty b").html(s+"%");else{let t="You can get this hint with no penalty.";e.find(".hint_content .hint_unlock_penalty").html(t)}}setHintUnlockedStatus(t,i)})}function setTotalPenalty(t){t&&$("#hints_total_penalty label").html(t+"%")}function existsUnlockFormContent(t){return $("#hint_"+t).find(".hint_content .hint_unlock_form").html()}function changeHint(t){let n="hint_"+t;$("#hint_info").hide(),$("#hint_container").show(),$(".task_hints").each(function(t,i){i.id===n?$("#"+i.id).show(500):$("#"+i.id).hide()})}function unlockNewHint(t){let n="/api/user_hints_api/";is_lti()&&(n="/"+$("form#task").attr("action").split("/")[1]+n),$.ajax({url:n,method:"POST",data:{course_id:getCourseId(),task_id:getTaskId(),hint_id:t}}).done(function(t){showHintAlert(t.message,t.status),updateHintsModalData(),sendUseTaskHintsAnalytics()})}function sendUseTaskHintsAnalytics(){let t="/api/analytics/";is_lti()&&(t="/"+$("form#task").attr("action").split("/")[1]+t),$.post(t,{service:{key:"task_hints_unlock",name:"Task hints - Unlocked by students"},course_id:getCourseId()})}function showHelp(){$("#hint_info").show(500),$("#hint_container").hide()}function updateHintsModalData(){$("#hint_container").hide(),loadHintsOnModal(),$("#hint_container").show(500)}