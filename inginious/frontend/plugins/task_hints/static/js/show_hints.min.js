function showHintAlert(t,n){let i=$("#hint_modal_alert");"success"==n&&i.attr("class","alert alert-success"),"error"==n&&i.attr("class","alert alert-danger"),i.text(t),i.show(),setTimeout(function(){hideHintAlert(i)},1e4)}function hideHintAlert(t){t.attr("class",""),t.text("")}function loadHintsOnModal(){let t={};$.get("/api/hints_api/",{course_id:getCourseId(),task_id:getTaskId()}).done(function(n){setHintsOnContainer(t=n.data)})}function setHintUnlockedStatus(t,n){let i=n.unlocked;if(hint_option=$("#hint_menu_"+t).find("a"),i)hint_option.attr("class","list-group-item list-group-item-success"),hint_penalty=n.penalty,hint_option.find(".hint_penalty").text(hint_penalty);else{hint_option.attr("class","list-group-item list-group-item-success disabled");hint_option.find("label").html();hint_option.find("label").html()}}function setHintsOnContainer(t){let n;$.each(t,function(t,i){n=i.unlocked;let e=$("#hint_"+t);if(n){new_hint_content=i.content,e.find(".hint_content").html(new_hint_content);let t=e.find(".hint_applied_penalty");t.show(),t.find("em").text(i.penalty+"%")}else if(!existsUnlockFormContent(t)){let n=$("#hints_unlock_forms_list").clone().html();if(n=n.replace(/key/g,t),e.find(".hint_content").append(n),e.find(".hint_content .hint_unlock_form").show(),hint_penalty=i.penalty,hint_penalty&&0!=hint_penalty)e.find(".hint_content .hint_unlock_penalty b").html(hint_penalty+"%");else{let t="You can get this hint with no penalty.";e.find(".hint_content .hint_unlock_penalty").html(t)}}setHintUnlockedStatus(t,i)})}function existsUnlockFormContent(t){return $("#hint_"+t).find(".hint_content .hint_unlock_form").html()}function changeHint(t){let n="hint_"+t;$("#hint_info").hide(),$("#hint_container").show(),$(".task_hints").each(function(t,i){i.id==n?$("#"+i.id).show(500):$("#"+i.id).hide()})}function unlockNewHint(t){$.ajax({url:"/api/hints_api/",method:"POST",data:{course_id:getCourseId(),task_id:getTaskId(),hint_id:t}}).done(function(t){showHintAlert(t.message,t.status),loadHintsOnModal(),showHelp(),sendUseTaskHintsAnalytics()})}function sendUseTaskHintsAnalytics(){$.post("/api/analytics/",{service:{key:"task_hints_unlock",name:"Task hints - Unlocked by students"},course_id:getCourseId()})}function showHelp(){$("#hint_info").show(500),$("#hint_container").hide()}