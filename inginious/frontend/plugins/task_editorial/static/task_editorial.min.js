let solution_language="",notebook_name="";function deleteLanguageSelectOptions(){$(".solution_language_select_option").remove()}function addTaskLanguages(){deleteLanguageSelectOptions();const o=$("#solution_code_language"),e=$(".checkbox_language"),n=e.length;for(let t=0;t<n;t++)if(e[t].checked){const n=`<option class="solution_language_select_option" value="${e[t].value}">${getLanguages(e[t].value)}</option>`;o.append(n)}}function setLastTaskSolutionCodeLanguage(){const o=solution_language;if(o){let e=!1;$("#solution_code_language option").each(function(){0==this.value.localeCompare(o)&&(e=!0)});const n=$("#solution_code_language");n[0].value=e?o:"0"}}function setSolutionCodeLanguage(){const o=$("#solution_code_language")[0].value;if(0!=o){const e=convertInginiousLanguageToCodemirror(o),n=codeEditors.solution_code,t=CodeMirror.findModeByName(e);n.setOption("mode",t.mime),CodeMirror.autoLoadMode(n,t.mode)}else{codeEditors.solution_code.setOption("mode","text/plain")}}function deleteNotebookNameSelectOptions(){$(".solution_notebook_select_option").remove()}function addTaskFiles(){deleteNotebookNameSelectOptions();const o=$("#solution_code_notebook"),e=notebook_name;$.get("/api/grader_generator/test_file_api",{course_id:getCourseId(),task_id:getTaskId()},function(n){$.each(n,function(n,t){t.complete_name.includes("ipynb")&&(o.append(`<option class="solution_notebook_select_option" value="${t.complete_name}">${t.complete_name}</option>`),0==t.complete_name.localeCompare(e)&&($("#solution_code_notebook")[0].value=e))})})}function loadLastSolutionConfiguration(){addTaskLanguages(),setLastTaskSolutionCodeLanguage(),setSolutionCodeLanguage()}function setTaskSolutionForm(){const o=$("#environment").val();["multiple_languages","Data Science","HDL"].includes(o)?($("#multiple_languages_task_solution").show(),$("#notebook_task_solution").hide()):["Notebook"].includes(o)&&($("#notebook_task_solution").show(),$("#multiple_languages_task_solution").hide())}function setTaskSolutionCode(){$("#task_solution_container").show();const o=$("#task_solution_code")[0].attributes.value.value,e=convertInginiousLanguageToCodemirror(getSolutionLanguage());if(e){const n=registerCodeEditor($("#task_solution_code")[0],e,10);n.setValue(o),n.setOption("readOnly","nocursor")}else{const e=registerCodeEditor($("#task_solution_code")[0],"text",10);e.setValue(o),e.setOption("readOnly","nocursor")}}function setSolutionNotebook(){$.get("/api/task_editorial/",{course_id:getCourseId(),task_id:getTaskId(),notebook_name:getNotebookName()}).done(function(o){const e=JSON.parse(o),n=$("#solution_notebook");render_notebook(e,n)})}$("a[data-toggle='tab'][href='#tab_editorial']").on("show.bs.tab",function(o){setTaskSolutionForm(),["multiple_languages","Data Science","HDL"].includes($("#environment").val())?loadLastSolutionConfiguration():["Notebook"].includes($("#environment").val())&&addTaskFiles()}),$("#solution_code_language").on("change",function(o){solution_language=$("#solution_code_language")[0].value}),$("#solution_code_notebook").on("change",function(o){notebook_name=$("#solution_code_notebook")[0].value}),jQuery(document).ready(function(){setTaskSolutionForm(),["multiple_languages","Data Science","HDL"].includes($("#environment").val())?(solution_language=getTaskSolutionCodeLanguage(),loadLastSolutionConfiguration()):["Notebook"].includes($("#environment").val())&&(notebook_name=getTaskSolutionNotebook(),addTaskFiles())}),$("#task_solution_modal").on("shown.bs.modal",function(){codeEditors.task_solution_code||setTaskSolutionCode()}),$("#task_solution_notebook_modal").on("shown.bs.modal",function(){setSolutionNotebook()});