let solutionLanguageOption="",notebookNameOption="";function deleteLanguageSelectOptions(){$(".solution_language_select_option").remove()}function addTaskLanguages(){deleteLanguageSelectOptions();const o=$("#solution_code_language"),e=$(".checkbox_language"),t=e.length;for(let n=0;n<t;n++)if(e[n].checked){const t=`<option class="solution_language_select_option" value="${e[n].value}">${getLanguages(e[n].value)}</option>`;o.append(t)}}function setLastTaskSolutionCodeLanguage(){const o=solutionLanguageOption;if(o){let e=!1;$("#solution_code_language option").each(function(){0==this.value.localeCompare(o)&&(e=!0)});const t=$("#solution_code_language");t[0].value=e?o:"0"}}function setSolutionCodeLanguage(){const o=$("#solution_code_language")[0].value;if(0!=o){const e=convertInginiousLanguageToCodemirror(o),t=codeEditors.solution_code,n=CodeMirror.findModeByName(e);t.setOption("mode",n.mime),CodeMirror.autoLoadMode(t,n.mode)}else{codeEditors.solution_code.setOption("mode","text/plain")}}function deleteNotebookNameSelectOptions(){$(".solution_notebook_select_option").remove()}function addTaskFiles(){deleteNotebookNameSelectOptions();const o=$("#solution_code_notebook"),e=notebookNameOption;$.get("/api/grader_generator/test_file_api",{course_id:getCourseId(),task_id:getTaskId()},function(t){$.each(t,function(t,n){n.complete_name.includes("ipynb")&&(o.append(`<option class="solution_notebook_select_option" value="${n.complete_name}">${n.complete_name}</option>`),0==n.complete_name.localeCompare(e)&&($("#solution_code_notebook")[0].value=e))})})}function loadLastSolutionConfiguration(){addTaskLanguages(),setLastTaskSolutionCodeLanguage(),setSolutionCodeLanguage()}function setTaskSolutionForm(){const o=$("#environment").val();["multiple_languages","Data Science","HDL"].includes(o)?($("#multiple_languages_task_solution").show(),$("#notebook_task_solution").hide()):["Notebook"].includes(o)&&($("#notebook_task_solution").show(),$("#multiple_languages_task_solution").hide())}function setTaskSolutionCode(){$("#task_solution_container").show();const o=$("#task_solution_code")[0].attributes.value.value,e=convertInginiousLanguageToCodemirror(getSolutionLanguage());if(e){const t=registerCodeEditor($("#task_solution_code")[0],e,10);t.setValue(o),t.setOption("readOnly","nocursor")}else{const e=registerCodeEditor($("#task_solution_code")[0],"text",10);e.setValue(o),e.setOption("readOnly","nocursor")}sendAnalyticsTaskSolution()}function setSolutionNotebook(){$.get("/api/task_editorial/",{course_id:getCourseId(),task_id:getTaskId(),notebook_name:getNotebookName()}).done(function(o){const e=JSON.parse(o),t=$("#solution_notebook");render_notebook(e,t),sendAnalyticsTaskSolution()})}function sendAnalyticsTaskTutorial(){let o="/api/analytics/";is_lti()&&(o="/"+$("form#task").attr("action").split("/")[1]+o),$.post(o,{service:{key:"task_tutorial",name:"Task editorial - Tutorial"},course_id:getCourseId()})}function sendAnalyticsTaskSolution(){let o="/api/analytics/";is_lti()&&(o="/"+$("form#task").attr("action").slice("/")[1]+o),$.post(o,{service:{key:"task_solution",name:"Task editorial - Solution"},course_id:getCourseId()})}$("a[data-toggle='tab'][href='#tab_editorial']").on("show.bs.tab",function(o){setTaskSolutionForm(),["multiple_languages","Data Science","HDL"].includes($("#environment").val())?loadLastSolutionConfiguration():["Notebook"].includes($("#environment").val())&&addTaskFiles()}),$("#solution_code_language").on("change",function(o){solutionLanguageOption=$("#solution_code_language")[0].value}),$("#solution_code_notebook").on("change",function(o){notebookNameOption=$("#solution_code_notebook")[0].value}),jQuery(document).ready(function(){setTaskSolutionForm(),["multiple_languages","Data Science","HDL"].includes($("#environment").val())?(solutionLanguageOption=getTaskSolutionCodeLanguage(),loadLastSolutionConfiguration()):["Notebook"].includes($("#environment").val())&&(notebookNameOption=getTaskSolutionNotebook(),addTaskFiles())}),$("#task_tutorial_modal").one("shown.bs.modal",function(){sendAnalyticsTaskTutorial()}),$("#task_solution_modal").one("shown.bs.modal",function(){codeEditors.task_solution_code||setTaskSolutionCode()}),$("#task_solution_notebook_modal").one("shown.bs.modal",function(){setSolutionNotebook()});