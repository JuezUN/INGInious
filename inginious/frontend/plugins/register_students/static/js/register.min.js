jQuery(document).ready(function(){let e=!1;function t(e){const t=$("#register_students_alert");t.prop("class","alert alert-danger"),"string"!=typeof e?t.text("Something went wrong while registering the students. Please try again."):t.text(e),t.prop("hidden",!1)}function s(){$("#register_students_modal").modal({backdrop:"",keyboard:!0}),$("#register_students_modal button[data-dismiss=modal]").each(function(){$(this).prop("disabled",!1)})}$("#register_students_modal").on("hidden.bs.modal",function(){e?window.location.replace(window.location.href):($("#students_file").val(""),$("#register_students_alert").prop("hidden",!0))}),$("form#upload_students_file").submit(function(n){n.preventDefault();const i=$("#students_file").prop("files")[0],r=$("#email_language").val();if(void 0===i)t("Please select a file before submitting it.");else if(/(\.csv)$/i.exec(i.name)){const n=new FormData;n.append("file",i),n.append("course",window.location.href.split("/")[4]),n.append("language",r),$.ajax({url:"/api/addStudents/",method:"POST",dataType:"json",data:n,mimeType:"multipart/form-data",processData:!1,contentType:!1,beforeSend:function(){$("#submit_register_students").prop("disabled",!0),$("#register_students_modal").modal({backdrop:"static",keyboard:!1}),$("#register_students_modal button[data-dismiss=modal]").each(function(){$(this).prop("disabled",!0)}),function(){const e=$("#register_students_alert");e.prop("class","alert alert-info"),e.text("Registering students..."),e.prop("hidden",!1)}()},success:function(n){!function(s){if("status"in s&&"error"===s.status)t(s.text);else if("status"in s&&"success"===s.status){const t=$("#register_students_alert");e=!0,$("#students_file").val(""),t.prop("class","alert alert-warning"),t.text(""),t.append($.parseHTML(s.text)),t.prop("hidden",!1),setTimeout(function(){t.prop("hidden",!0)},1e5)}else t("An error occurred while registering. Please try again.")}(n),s(),$("#submit_register_students").prop("disabled",!1)},error:function(e){t(e),s(),$("#submit_register_students").prop("disabled",!1)}})}else t("The inserted file should be a .csv file.")})});