let studio_grader_test_case_sequence=0,grader_test_cases_count=0,test_cases_input=[],ids_test_cases_input=[];function studio_add_test_case_from_form(){studio_add_test_case({input_file:$("#grader_test_case_in").val(),output_file:$("#grader_test_case_out").val()})}function studio_add_test_case(e){e=$.extend({input_file:null,output_file:null,weight:1,diff_shown:!1},e);let t=studio_grader_test_case_sequence,_=e.input_file,s=e.output_file;if(!_||!s)return;let a=$("#test_case_template").html().replace(/TID/g,t),i=$(a);i.find("#grader_test_cases_"+t+"_input_file").val(_),i.find("#grader_test_cases_"+t+"_output_file").val(s),i.find("#grader_test_cases_"+t+"_weight").val(e.weight),i.find("#grader_test_cases_"+t+"_diff_shown").prop("checked",e.diff_shown),studio_grader_test_case_sequence++,grader_test_cases_count++,test_cases_input.push(_),ids_test_cases_input.push(t),1==grader_test_cases_count&&$("#grader_test_cases_header").show(),$("#grader_test_cases_container").append(i)}function studio_load_grader_test_cases(e){$.each(e,function(e,t){studio_add_test_case(t)})}function studio_remove_test_case(e){$("#grader_test_cases_"+e).remove(),0==--grader_test_cases_count&&$("#grader_test_cases_header").hide();let t=ids_test_cases_input.findIndex(t=>t===e);test_cases_input.splice(t,1),ids_test_cases_input.splice(t,1)}function studio_update_grader_problems(){let e=$("#accordion"),t=[];$.each(e.children(),function(e,_){let s=_.id;if(!s.startsWith("subproblem_well_"))throw new Error("Unable to process problem well: "+s);let a=s.substring("subproblem_well_".length),i=$(_).find("[name='problem["+a+"][type]']").val();t.push({id:a,type:i})});let _=$("#grader_problem_id"),s=_.val();_.empty(),$.each(t,function(e,t){"code_multiple_languages"!==t.type&&"code_file_multiple_languages"!==t.type||(_.append($("<option>",{value:t.id,text:t.id})),s=t.id)}),_.val(s)}function studio_set_initial_problem(e){let t="",_=$("#grader_problem_id");t=e,$("#generate_grader").is(":checked")&&e&&(t=e,_.append($("<option>",{value:e,text:e}))),_.val(t)}function studio_update_grader_files(){$.get("/api/grader_generator/test_file_api",{course_id:courseId,task_id:taskId},function(e){let t=$("#grader_test_case_in"),_=$("#grader_test_case_out"),s=$("#testbench_file_name"),a=$("#hdl_expected_output");t.empty(),_.empty(),s.empty(),a.empty(),$.each(e,function(e,i){if(i.is_directory)return;if("run"===i.complete_name)return;let n=$("<option>",{value:i.complete_name,text:i.complete_name});t.append(n),_.append(n.clone()),s.append(n.clone()),a.append(n.clone())})},"json")}function studio_update_container_name(){let e=$("#environment").val(),t=$(".grader_form");for(let e=0;e<t.length;e++)t[e].style.display="none";if("HDL"===e)try{$("#hdl_grader_form")[0].style.display="block"}catch{}if("multiple_languages"===e||"Data Science"===e)try{$("#multilang_grader_form")[0].style.display="block"}catch{}}function read_files_and_match(){$.get("/api/grader_generator/test_file_api",{course_id:courseId,task_id:taskId},function(e){$.each(e,function(t,_){if(_.is_directory)return;let s={},a=_.name.split("."),i=_.complete_name.split("."),n=a.splice(0,a.length-1).join("."),c=i.splice(0,i.length-1).join(".")+".out";if(!test_cases_input.includes(_.name)&&"in"===a[a.length-1]){let t={level:_.level,complete_name:c,name:n+".out",is_directory:!1};for(ind=0;ind<e.length;ind++){var r=e[ind];r.complete_name===t.complete_name&&r.is_directory===t.is_directory&&studio_add_test_case(s={input_file:_.complete_name,output_file:t.complete_name})}}})},"json")}function toggle_selection_tests_cases(){var e=$("#toggle_select_test_cases")[0].checked;e=!e,$("#toggle_select_test_cases").prop("checked",e),ids_test_cases_input.forEach((t,_)=>{$("#grader_test_cases_"+t+"_diff_shown").prop("checked",e)})}function remove_all_test_cases(){ids_test_cases_input.slice().forEach((e,t)=>{studio_remove_test_case(e)})}